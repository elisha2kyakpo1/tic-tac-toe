#!/usr/bin/env ruby

# welcome message
def welcome_message
  puts <<~HEREDOC
    *****--welcome to Azeez and Helcio tic tac toe--*****
         press any key to start the game and have fun!
  HEREDOC
end

# player name
def player_names
  players = []
  puts 'player one name?'
  players[0] = gets.chomp

  puts 'player two name?'
  players[1] = gets.chomp

  players
end

def display_position_chosen
  puts <<-HEREDOC
    1 | 2 | 3
  ---------------
    4 | 5 | 6
  ---------------
    7 | 8 | 9
  HEREDOC
end

def display_board
  p 'player should choose a valid number between 1 and 9!'

  puts <<-HEREDOC
    1 | 2 | 3
  ---------------
    4 | 5 | 6
  ---------------
    7 | 8 | 9
  HEREDOC
end

def player_turn(player_name)
  p "#{player_name} please choose a position on the board"
  gets.chomp.to_i
end

def user_input
  p 'choose a number between 1 and 9'
  gets.chomp.to_i
end

# players symbols
def players_symbols(players)
  puts <<~HEREDOC
    #{players[0]} symbol is X and #{players[1]} is O
  HEREDOC
end

def check_user_play_position(user_input)
  return false unless user_input.between?(1, 9)

  true
end

def game_result(counter, names)
  case counter
  when 5
    p 'Congratulations'
    p "Player #{names[0]} is the winner !"
    false
  when 6
    p 'Congratulations'
    p "Player #{names[1]} is the winner !"
    false
  when 9
    p 'The game is a tie'
    p 'press p to play again or c to cancel'
    false
  else
    true
  end
end

##### start game #####
welcome_message
key = gets

names = player_names if key

players_symbols(names)

display_board

game_on = true
i = 0
while game_on

  if i != 9
    puts "Player #{names[i % 2]} turn"
    input = gets.chomp.to_i
  end

  if !input.nil?
    p 'User input taken'
    validate = check_user_play_position(input)

    if validate
      puts
      game_on = game_result(i, names)
      i += 1
      display_position_chosen
    else
      p 'enter a valid position number please'
    end
  else
    p 'input must not be empty'
  end

end
